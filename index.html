<!doctype html>
<html lang="bg">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>–î–µ–±–∞</title>
<meta name="robots" content="noindex, nofollow" />

<style>
:root{
  --bg:#D6E0AC;
  --crawl-color: rgba(210, 90, 170, 0.70); /* a bit more pink */
  --logo-top: 20px;
  --logo-gap: 18px; /* space under logo before text starts */
}

body{
  margin:0;
  height:100vh;
  background:var(--bg);
  overflow:hidden;
  font-family:system-ui,sans-serif;
}

/* TOP: LOGO */
#top{
  position:absolute;
  top:var(--logo-top);
  left:0; right:0;
  display:flex;
  justify-content:center;
  z-index:3;
  pointer-events:none;
}
#debaLogo{
  width:min(720px,88vw);
  user-select:none;
  -webkit-user-drag:none;
}

/* CRAWL WINDOW (clipped so it NEVER goes behind logo) */
#middle{
  position:absolute;
  left:0; right:0;
  bottom:0;
  top:0;                /* will be set by JS to logoBottom */
  overflow:hidden;      /* THIS is the key */
  z-index:2;
  pointer-events:none;
}

#crawlWrap{
  position:absolute;
  left:0; right:0;
  bottom:0;
  display:flex;
  justify-content:center;
  transform: translateY(110%);
}

.crawl{
  width:min(900px,92vw);
  color:var(--crawl-color);
  font-size:clamp(15px,2.0vw,24px);
  font-weight:650;
  line-height:1.6;
  text-align:center;
  white-space:pre-line;
  text-shadow:
    0 1px 0 rgba(0,0,0,0.05),
    0 0 10px rgba(180,70,150,0.18);
}

/* status */
#status{
  position:fixed;
  bottom:10px;
  left:10px;
  font-size:12px;
  opacity:.7;
  padding:6px 8px;
  border-radius:10px;
  background:rgba(255,255,255,0.28);
  backdrop-filter: blur(8px);
  user-select:none;
  z-index:6;
}

/* AUDIO UNLOCK OVERLAY */
#unlock{
  position:fixed;
  inset:0;
  z-index:10;
  display:none;
  align-items:center;
  justify-content:center;
  background: radial-gradient(circle at center, rgba(0,0,0,0.18), rgba(0,0,0,0.0) 60%);
}
#unlockCard{
  width:min(520px,88vw);
  padding:18px 18px;
  border-radius:18px;
  background: rgba(255,255,255,0.14);
  border: 1px solid rgba(255,255,255,0.28);
  backdrop-filter: blur(14px);
  box-shadow: 0 10px 40px rgba(0,0,0,0.16);
  text-align:center;
  user-select:none;
  cursor:pointer;
}
#unlockTitle{
  font-weight:800;
  letter-spacing:0.3px;
  font-size:18px;
  color: rgba(25,25,25,0.92);
}
#unlockSub{
  margin-top:6px;
  font-size:12px;
  opacity:0.75;
  color: rgba(25,25,25,0.85);
}
#unlockHint{
  margin-top:10px;
  display:inline-block;
  padding:10px 14px;
  border-radius:999px;
  background: rgba(210, 90, 170, 0.20);
  border: 1px solid rgba(210, 90, 170, 0.35);
  color: rgba(25,25,25,0.92);
  font-weight:750;
}
</style>
</head>

<body>

<div id="top">
  <img id="debaLogo" src="assets/deba.png" alt="–î–µ–±–∞">
</div>

<div id="middle">
  <div id="crawlWrap">
    <div class="crawl" id="crawlText">
–°–ª–æ–≤–æ—Ç–æ, —Å–ª–æ–≤–æ—Ç–æ –Ω–∞ –º–µ—á–æ–≤–µ—Ç–µ
–°–ª–æ–≤–æ—Ç–æ –µ —Å–ª–æ–≤–æ—Ç–æ –Ω–∞ –º–µ—á–æ–≤–µ—Ç–µ‚Ä¶ –∑–∞ –¥–∞ –±—ä–¥–∞—Ç –≤—ä–∑—Å—Ç–∞–Ω–æ–≤–µ–Ω–∏ –Ω–µ—Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç–∏—Ç–µ
–î–æ—Ä–∏ –Ω–∏–∑–∫–∏—Ç–µ —Å–µ –Ω–∞–¥–∏–≥–Ω–∞—Ö–∞‚Ä¶ –ø—Ä–∞—Ç–µ–Ω–∏–∫—ä—Ç –Ω–∞ —Ä–µ—à–∏—Ç–µ–ª–Ω–∏—Ç–µ

–°–ª–æ–≤–æ—Ç–æ, —Å–ª–æ–≤–æ—Ç–æ –Ω–∞ –º–µ—á–æ–≤–µ—Ç–µ
–°–ª–æ–≤–æ—Ç–æ –µ —Å–ª–æ–≤–æ—Ç–æ –Ω–∞ –º–µ—á–æ–≤–µ—Ç–µ‚Ä¶ –∑–∞ –¥–∞ –±—ä–¥–∞—Ç –≤—ä–∑—Å—Ç–∞–Ω–æ–≤–µ–Ω–∏ –Ω–µ—Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç–∏—Ç–µ
–î–æ—Ä–∏ –Ω–∏–∑–∫–∏—Ç–µ —Å–µ –Ω–∞–¥–∏–≥–Ω–∞—Ö–∞‚Ä¶ –ø—Ä–∞—Ç–µ–Ω–∏–∫—ä—Ç –Ω–∞ —Ä–µ—à–∏—Ç–µ–ª–Ω–∏—Ç–µ

–°–ª–æ–≤–æ—Ç–æ, —Å–ª–æ–≤–æ—Ç–æ –Ω–∞ –º–µ—á–æ–≤–µ—Ç–µ
–°–ª–æ–≤–æ—Ç–æ –µ —Å–ª–æ–≤–æ—Ç–æ –Ω–∞ –º–µ—á–æ–≤–µ—Ç–µ‚Ä¶ –∑–∞ –¥–∞ –±—ä–¥–∞—Ç –≤—ä–∑—Å—Ç–∞–Ω–æ–≤–µ–Ω–∏ –Ω–µ—Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç–∏—Ç–µ
–î–æ—Ä–∏ –Ω–∏–∑–∫–∏—Ç–µ —Å–µ –Ω–∞–¥–∏–≥–Ω–∞—Ö–∞‚Ä¶ –ø—Ä–∞—Ç–µ–Ω–∏–∫—ä—Ç –Ω–∞ —Ä–µ—à–∏—Ç–µ–ª–Ω–∏—Ç–µ

–ù–µ –º–æ–∂–∞—Ö–∞ –¥–∞ –æ—Å–∫–≤–µ—Ä–Ω—è—Ç —Å–≤–µ—Ç–∏–ª–∏—â–µ—Ç–æ –º–∏‚Ä¶ –¥–æ—Ä–∏ –ª—ä–≤–æ–≤–µ –¥–∞ –≥–∏ –æ–±–∫—Ä—ä–∂–∞–≤–∞—Ö–∞
–£—Ç–∞–π–∫–∞—Ç–∞ –Ω–∞ –ø–æ—Ç–∏—Å–Ω–∏—á–µ—Å—Ç–≤–æ—Ç–æ –Ω–∞–ø–∞–¥–Ω–∞‚Ä¶ –∫—ä–¥–µ –µ –∑–∞–≤–µ—Ç—ä—Ç –Ω–∞ —Ä–µ—à–∏—Ç–µ–ª–Ω–∏—Ç–µ?
–ó–∞–±—Ä–∞–≤–∏—Ö–∞, —á–µ —Å–º–µ –≥–æ—Ä–¥–∏‚Ä¶ –∑–∞—â–∏—Ç–∞–≤–∞–º–µ —Å–µ –∫–∞—Ç–æ —è—Ä–æ—Å—Ç–Ω–∏—Ç–µ
–ù–∏–µ —Å–º–µ –æ–Ω–µ–∑–∏, –∫–æ–∏—Ç–æ —Å—Ç—ä–ø–∫–∞—Ö–∞‚Ä¶ —Ç—Ä–æ–Ω–∞ –Ω–∞ —á—É–∂–¥–µ–Ω—Ü–∏—Ç–µ —Å –∫–æ–Ω–µ

–° –∫–æ–Ω–µ ‚Äì —Ç—Ä–æ–Ω–∞ –Ω–∞ —á—É–∂–¥–µ–Ω—Ü–∏—Ç–µ

–°–ª–æ–≤–æ—Ç–æ, —Å–ª–æ–≤–æ—Ç–æ ‚Äì –º–µ—á–æ–≤–µ—Ç–µ
–°–ª–æ–≤–æ—Ç–æ –µ —Å–ª–æ–≤–æ—Ç–æ –Ω–∞ –º–µ—á–æ–≤–µ—Ç–µ‚Ä¶ –∑–∞ –¥–∞ –±—ä–¥–∞—Ç –≤—ä–∑—Å—Ç–∞–Ω–æ–≤–µ–Ω–∏ –Ω–µ—Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç–∏—Ç–µ
–î–æ—Ä–∏ –Ω–∏–∑–∫–∏—Ç–µ —Å–µ –Ω–∞–¥–∏–≥–Ω–∞—Ö–∞‚Ä¶ –ø—Ä–∞—Ç–µ–Ω–∏–∫—ä—Ç –Ω–∞ —Ä–µ—à–∏—Ç–µ–ª–Ω–∏—Ç–µ

–°–ª–æ–≤–æ—Ç–æ –µ —Å–ª–æ–≤–æ—Ç–æ –Ω–∞ –º–µ—á–æ–≤–µ—Ç–µ
–°–ª–æ–≤–æ—Ç–æ –µ —Å–ª–æ–≤–æ—Ç–æ –Ω–∞ –º–µ—á–æ–≤–µ—Ç–µ‚Ä¶ –∑–∞ –¥–∞ –±—ä–¥–∞—Ç –≤—ä–∑—Å—Ç–∞–Ω–æ–≤–µ–Ω–∏ –Ω–µ—Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç–∏—Ç–µ
–î–æ—Ä–∏ –Ω–∏–∑–∫–∏—Ç–µ —Å–µ –Ω–∞–¥–∏–≥–Ω–∞—Ö–∞‚Ä¶ –ø—Ä–∞—Ç–µ–Ω–∏–∫—ä—Ç –Ω–∞ —Ä–µ—à–∏—Ç–µ–ª–Ω–∏—Ç–µ

–°–ª–æ–≤–æ—Ç–æ –µ —Å–ª–æ–≤–æ—Ç–æ –Ω–∞ –º–µ—á–æ–≤–µ—Ç–µ
–°–ª–æ–≤–æ—Ç–æ –µ —Å–ª–æ–≤–æ—Ç–æ –Ω–∞ –º–µ—á–æ–≤–µ—Ç–µ‚Ä¶ –∑–∞ –¥–∞ –±—ä–¥–∞—Ç –≤—ä–∑—Å—Ç–∞–Ω–æ–≤–µ–Ω–∏ –Ω–µ—Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç–∏—Ç–µ
–î–æ—Ä–∏ –Ω–∏–∑–∫–∏—Ç–µ —Å–µ –Ω–∞–¥–∏–≥–Ω–∞—Ö–∞‚Ä¶ –ø—Ä–∞—Ç–µ–Ω–∏–∫—ä—Ç –Ω–∞ —Ä–µ—à–∏—Ç–µ–ª–Ω–∏—Ç–µ
    </div>
  </div>
</div>

<div id="status">ready</div>

<audio id="bgm" src="assets/music.mp3" loop preload="auto"></audio>

<div id="unlock">
  <div id="unlockCard" role="button" aria-label="Start audio">
    <div id="unlockTitle">–ü—É—Å–Ω–∏ –∑–≤—É–∫–∞ üîä</div>
    <div id="unlockSub">Autoplay –µ –±–ª–æ–∫–∏—Ä–∞–Ω. –ï–¥–∏–Ω tap –∏ —Ç—Ä—ä–≥–≤–∞.</div>
    <div id="unlockHint">TAP ANYWHERE</div>
  </div>
</div>

<script>
const statusEl = document.getElementById("status");
const audio = document.getElementById("bgm");
const unlock = document.getElementById("unlock");
const unlockCard = document.getElementById("unlockCard");

const middle = document.getElementById("middle");
const crawlWrap = document.getElementById("crawlWrap");
const crawlText = document.getElementById("crawlText");
const logo = document.getElementById("debaLogo");

audio.volume = 1.0;

let crawlRAF = null;
let crawlStartTime = null;
let durationMs = 203000;

function setMiddleTopToLogoBottom(){
  const r = logo.getBoundingClientRect();
  const gap = parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--logo-gap")) || 18;
  middle.style.top = `${r.bottom + gap}px`;
}

function startCrawl(){
  cancelAnimationFrame(crawlRAF);

  setMiddleTopToLogoBottom();

  const windowH = middle.getBoundingClientRect().height;
  const textH = crawlText.getBoundingClientRect().height;

  // Start below the visible crawl window, end when fully passed
  const startY = windowH + 30;
  const endY   = -textH - 40;

  crawlWrap.style.transform = `translateY(${startY}px)`;
  crawlStartTime = performance.now();

  function step(now){
    const t = (now - crawlStartTime) % durationMs;
    const p = t / durationMs;
    const y = startY + (endY - startY) * p;

    crawlWrap.style.transform = `translateY(${y}px)`;
    crawlRAF = requestAnimationFrame(step);
  }

  crawlRAF = requestAnimationFrame(step);
}

async function tryPlay(){
  try{
    await audio.play();
    unlock.style.display = "none";
    statusEl.textContent = "music on";
    startCrawl();
  }catch(e){
    unlock.style.display = "flex";
    statusEl.textContent = "tap to enable sound";
  }
}

audio.addEventListener("loadedmetadata", () => {
  if (isFinite(audio.duration) && audio.duration > 1) {
    durationMs = audio.duration * 1000;
  }
  if (!audio.paused) startCrawl();
});

tryPlay();

function userGestureStart(){
  tryPlay();
}

unlock.addEventListener("pointerdown", userGestureStart);
unlockCard.addEventListener("pointerdown", userGestureStart);
window.addEventListener("pointerdown", userGestureStart, { passive:true });
window.addEventListener("keydown", userGestureStart);

setInterval(() => {
  if (!document.hidden && audio.paused) tryPlay();
}, 1500);

document.addEventListener("visibilitychange", () => {
  if (!document.hidden) tryPlay();
});

window.addEventListener("resize", () => {
  if (!audio.paused) startCrawl();
  else setMiddleTopToLogoBottom();
});

// ensure correct top even before audio starts
window.addEventListener("load", setMiddleTopToLogoBottom);
</script>

</body>
</html>
