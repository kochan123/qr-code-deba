<!DOCTYPE html>
<html lang="bg">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–î–µ–±–∞</title>

  <meta name="robots" content="noindex, nofollow">

  <style>
    :root { --bg: #D6E0AC; }

    body{
      margin:0;
      height:100vh;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      background: var(--bg);
      overflow:hidden;
      font-family: system-ui, sans-serif;
    }

    /* Your ‚Äú–î–µ–±–∞‚Äù image */
    #debaLogo{
      width: min(720px, 88vw);
      height: auto;
      margin-bottom: 14px;
      user-select:none;
      -webkit-user-drag:none;
    }

    canvas{
      width: min(420px, 80vw);
      height: min(420px, 80vw);
      touch-action: manipulation;
    }

    #hint{
      margin-top: 10px;
      font-size: 14px;
      opacity: 0.6;
      user-select:none;
    }

    #status{
      position: fixed;
      bottom: 10px;
      left: 10px;
      font-size: 12px;
      opacity: 0.65;
      user-select:none;
    }
  </style>
</head>

<body>
  <img id="debaLogo" src="assets/deba.png" alt="–î–µ–±–∞" />
  <canvas id="pig"></canvas>
  <div id="hint">tap = turbo üê∑</div>
  <div id="status"></div>

  <script src="https://unpkg.com/three@0.158.0/build/three.min.js"></script>
  <script src="https://unpkg.com/three@0.158.0/examples/js/loaders/GLTFLoader.js"></script>

  <script>
    const statusEl = document.getElementById("status");
    const canvas = document.getElementById("pig");

    const scene = new THREE.Scene();

    const renderer = new THREE.WebGLRenderer({ canvas, alpha: true, antialias: true });
    renderer.setPixelRatio(Math.min(window.devicePixelRatio || 1, 2));

    const camera = new THREE.PerspectiveCamera(55, 1, 0.1, 1000);
    camera.position.set(0, 0.2, 2.8);

    // lighting
    scene.add(new THREE.AmbientLight(0xffffff, 0.7));
    const key = new THREE.DirectionalLight(0xffffff, 1.0);
    key.position.set(2, 2, 2);
    scene.add(key);

    function resize(){
      const r = canvas.getBoundingClientRect();
      const w = Math.max(1, Math.floor(r.width));
      const h = Math.max(1, Math.floor(r.height));
      renderer.setSize(w, h, false);
      camera.aspect = w / h;
      camera.updateProjectionMatrix();
    }
    window.addEventListener("resize", resize);

    let pig = null;

    const loader = new THREE.GLTFLoader();
    statusEl.textContent = "loading pig...";

loader.load(
  "assets/pig.glb",
  (gltf) => {
    pig = gltf.scene;

    // 1) Center the model at (0,0,0)
    const box = new THREE.Box3().setFromObject(pig);
    const size = box.getSize(new THREE.Vector3());
    const center = box.getCenter(new THREE.Vector3());
    pig.position.sub(center);

    // 2) Fit camera distance to model size
    const maxDim = Math.max(size.x, size.y, size.z);
    const fov = camera.fov * (Math.PI / 180);
    let dist = (maxDim / 2) / Math.tan(fov / 2);

    dist *= 1.4; // padding so it doesn't touch edges

    camera.position.set(0, maxDim * 0.15, dist);
    camera.near = dist / 100;
    camera.far = dist * 100;
    camera.updateProjectionMatrix();

    // 3) Add it and render
    scene.add(pig);
    statusEl.textContent = "";
    resize();
  },
  undefined,
  (err) => {
    console.error(err);
    statusEl.textContent = "pig failed to load (check assets/pig.glb)";
  }
);


    // turbo spin
    let base = 0.012;
    let turbo = 0.0;

    function boost(){
      turbo = Math.min(turbo + 0.10, 0.30);
    }
    window.addEventListener("pointerdown", boost);

    function animate(){
      requestAnimationFrame(animate);
      turbo *= 0.92;

      if (pig) pig.rotation.y += (base + turbo);
      renderer.render(scene, camera);
    }

    resize();
    animate();
  </script>
</body>
</html>
